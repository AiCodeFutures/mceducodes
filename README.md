# mceducodes

Minecraft Education / MakeCode Python 脚本合集：用代理 / 指令一键生成房屋、多层楼房，以及带水电梯的多层建筑示例，便于教学、演示与二次扩展。

## 目录

1. 背景与目标
2. 代码结构
3. 快速上手
4. 各示例功能说明
   - 代理机器人盖房子 (`ah` 指令)
   - 多层楼房（基础版 `build` 指令）
   - 带水电梯的多层楼房（强化版 `build` 指令）
5. 可调参数与自定义
6. 常见修改指引
7. 兼容与环境
8. 常见问题 (FAQ)
9. 版权与许可
10. 后续扩展建议

---

## 1. 背景与目标

通过面向学生/初学者的可视化 + Python 脚本示例，快速理解：

- 如何使用 `player.on_chat` 注册聊天命令。
- 如何用代理 `agent` 精准放置方块。
- 如何用 `blocks.fill / blocks.place` 构建体量结构。
- 如何分层（楼层 / 屋顶 / 装饰）组织生成逻辑。

## 2. 代码结构

```text
README.md
代理机器人盖房子/
	main.py                  # 命令 ah：小型 8×8×5 房+三层层叠屋顶
多层楼房/
	main.py                  # 命令 build：多层楼（地基+墙体+嵌入灯+斜屋顶）
	带水电梯的多层楼房/
		main.py                # 命令 build：在基础版基础上加入水电梯 & 大门强化
```

> 注意：两个 `build` 指令脚本位于不同目录，导入（复制）哪一个到 MakeCode 就激活哪一种实现，不会冲突。

## 3. 快速上手

1. 打开 Minecraft Education，进入一个世界。
2. 打开 Code Builder (按 `C`)。
3. 创建 / 导入 Python 项目，把对应 `main.py` 内容粘贴进去。
4. 回到游戏聊天框：

   - 输入 `ah` 生成 8×8 房屋（代理版本）。
   - 或输入 `build` 生成多层建筑（取决于当前粘贴的脚本是基础版还是水电梯版）。

5. 等待自动建造完成（方块批量放置需要一点时间）。

## 4. 各示例功能说明

### 4.1 代理机器人盖房子 (`代理机器人盖房子/main.py`)

命令：`ah`

特性：

- 使用代理精准“跳转到目标上方 + 向下放置”策略，减少走路径。
- 参数：`W=8, D=8, H=5`。
- 结构：地板 → 四面墙（含门洞、前墙玻璃窗带）→ 三层逐渐收缩木板屋顶（挑檐 / 平层 / 内收）。
- 通过槽位（slot）预装材料：石砖、玻璃、木板。
- 演示封装：`place_at`、`tp_above`、`ensure_on_ground` 等辅助函数。

可展示主题：坐标计算 / 代理移动 / 条件留空（门 / 窗） / 多层屋顶。

### 4.2 多层楼房基础版 (`多层楼房/main.py`)

命令：`build`

特性：

- 楼层参数化：`FLOORS=3`，单层高度 `FLOOR_H=7`。
- 地基外扩 + 两层石砖基座。
- 每层外墙与内部空间分离：先填满后挖空。
- 从第二层起自动生成连续窗带（玻璃替换）。
- 在“本层地板高度”嵌入上一层天花板灯（海晶灯），保持室内采光。
- 三层“逐渐缩小”斜式屋顶（可视为简化金字塔）。

### 4.3 带水电梯的多层楼房强化版 (`多层楼房/带水电梯的多层楼房/main.py`)

命令：`build`

新增特性：

- 双水电梯：上行（灵魂沙气泡上升）、下行（岩浆块气泡下降）。
- 玻璃电梯井 + 自动灌水 + 各层开门。
- 大型门廊（加粗立柱、门楣、灯饰）。
- 逻辑模块化：`build_grand_entrance`、`build_water_elevators`、`build_one_elevator`。

可展示主题：功能分块 / 多组件组合 / 动态门位开孔 / 流体与特殊方块交互。

## 5. 可调参数与自定义

| 脚本       | 关键参数                                   | 说明                   | 修改影响                                   |
| ---------- | ------------------------------------------ | ---------------------- | ------------------------------------------ |
| 代理建房   | `W, D, H`                                  | 宽、深、高（墙体高度） | 改大需同步考虑屋顶三层循环边界             |
| 代理建房   | 窗条件 `(W-4 <= x <= W-2 and dy in [2,3])` | 前墙右侧窗带           | 可改成其他墙/高度区间                      |
| 多层楼房   | `W, D`                                     | 总平面尺寸             | 屋顶、窗、灯分布随之扩展                   |
| 多层楼房   | `FLOORS, FLOOR_H`                          | 楼层数 / 每层高度      | 修改后灯位与电梯高度自动匹配（若是强化版） |
| 多层楼房   | `ROOF_OVERHANG`                            | 屋檐外挑               | 调整屋顶覆盖范围和层数收缩起点             |
| 强化版电梯 | `build_one_elevator` 参数 `(sx, sz)`       | 电梯井中心坐标         | 需与内部留空区域不冲突                     |
| 强化版电梯 | `side_open` (`N/E/S/W`)                    | 哪一侧开门             | 影响门位置、朝向体验                       |

### 5.1 修改材料示例

将石砖改为深板岩：

```python
from minecraft import *  # 伪示例：实际环境中已有常量
# 替换 STONE_BRICKS -> DEEPSLATE_BRICKS (或其他)
```

### 5.2 增加随机窗洞示例（思路）

1. 遍历墙坐标时引入 `import random`。
2. 条件：若在指定高度且 `random.random() < 0.2` 则用玻璃，否则墙块。
3. 注意：避免门 / 结构边角被随机改掉，可先排除。

## 6. 常见修改指引

| 目标         | 做法                                                    | 备注                                           |
| ------------ | ------------------------------------------------------- | ---------------------------------------------- |
| 改门宽度     | 调整留空 `x` 范围                                       | 代理脚本里是条件 `if (x==1) and (dy in [1,2])` |
| 加楼层       | 增大 `FLOORS`                                           | 注意世界高度限制                               |
| 换屋顶材质   | 改 `PLANKS_ACACIA` 等常量                               | 可混色：按层切换常量                           |
| 增加内部楼梯 | 先在内部 `blocks.fill(AIR, ...)` 空间中再写楼梯放置逻辑 | 与电梯共存需避让                               |
| 调整灯密度   | 改 `range(2, W-2, 5)` 步长                              | 减小步长=更密集                                |

## 7. 兼容与环境

- 平台：Minecraft Education / MakeCode Python 模式。
- 不依赖外部第三方库，仅使用官方 API（`player`, `agent`, `blocks`, `positions` 等）。
- 建议在平坦世界或空旷区域执行，确保不会与已有建筑冲突。

## 8. 常见问题 (FAQ)

| 问题              | 说明 / 解决                                                                            |
| ----------------- | -------------------------------------------------------------------------------------- |
| 命令输入后无反应  | 确认脚本已保存且命令拼写正确；聊天前缀无需 `/`，直接输入 `ah` 或 `build`。             |
| 代理脚卡住        | 可能与实体 / 障碍碰撞，重新执行命令会重新放置（已放块不影响）。                        |
| 建筑与地面错位    | 代理版以玩家为中心偏移；多层脚本直接使用 `player.position()`，可在调用前站到期望原点。 |
| 水电梯不上升/下降 | 确保底部灵魂沙 / 岩浆块已生成，必要时重新执行建造。                                    |
| 想局部重建        | 删除对应区域方块或换位置重新生成。                                                     |

## 9. 版权与许可

仅供教学 / 学习用途。保留引用与再分发时的署名。若需商用，请先征询作者（或自行替换原创内容）。

## 10. 后续扩展建议

- 楼层内部自动布局（房间 / 走廊 / 家具占位）。
- 支持 JSON / 聊天参数动态输入尺寸。
- 夜间自动照明 / 传感器触发。
- 添加循环 / 活塞 / 红石电梯变体。
- 将核心函数抽象成“模块库”供多项目复用。

---

### 指令速查

| 指令    | 来源脚本           | 功能摘要                            |
| ------- | ------------------ | ----------------------------------- |
| `ah`    | 代理机器人盖房子   | 8×8×5 小房 + 三层屋顶 + 窗带        |
| `build` | 多层楼房           | 多层方形楼 + 窗带 + 嵌入灯 + 斜屋顶 |
| `build` | 带水电梯的多层楼房 | 上述全部 + 水电梯 + 大门强化        |

欢迎继续演化，制作你自己的自动生成建筑库！
